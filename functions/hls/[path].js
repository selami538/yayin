export async function onRequest(context) { const request = context.request; const parsedUrl = new URL(request.url); const targetUrl = "https://esraerol2.ronaldovurdu.help" + parsedUrl.pathname + parsedUrl.search; let response; try { response = await fetch(targetUrl); } catch (err) { return new Response("Fetch error: " + err.message, { status: 500 }); } const data = await response.arrayBuffer(); const newHeaders = new Headers(response.headers); newHeaders.delete("set-cookie"); newHeaders.set("Access-Control-Allow-Origin", "*"); return new Response(data, { status: response.status, headers: newHeaders, }); }
